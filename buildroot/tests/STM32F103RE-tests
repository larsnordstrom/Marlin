#!/usr/bin/env bash
#
# Build tests for STM32F103RE
#

# exit on first failure
set -e

#
# Build with the default configurations
#
restore_configs
opt_set MOTHERBOARD BOARD_STM32F103RE
opt_set EXTRUDERS 2
opt_set SERIAL_PORT -1
opt_enable EEPROM_SETTINGS EEPROM_CHITCHAT REPRAP_DISCOUNT_SMART_CONTROLLER SDSUPPORT \
           PAREN_COMMENTS GCODE_MOTION_MODES SINGLENOZZLE TOOLCHANGE_FILAMENT_SWAP TOOLCHANGE_PARK \
           GCODE_MACROS NOZZLE_PARK_FEATURE NOZZLE_CLEAN_FEATURE
exec_test $1 $2 "STM32F103RE with EEPROM, RRDSC, SD, PAREN_COMMENTS, GCODE_MOTION_MODES, etc." "$3"

# cleanup
restore_configs
